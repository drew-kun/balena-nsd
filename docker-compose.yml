version: '2.1'

volumes:
  nsd_config:
  nsd_zones:
  nsd_db:

services:
  nsd:
    build: ./nsd
    environment:
      NSD_CFG: c2VydmVyOgogIHNlcnZlci1jb3VudDogMQogIGlwNC1vbmx5OiB5ZXMKICBoaWRlLXZlcnNpb246IHllcwogIGlkZW50aXR5OiAiIgogIHpvbmVzZGlyOiAiL3pvbmVzIgoKcmVtb3RlLWNvbnRyb2w6CiAgY29udHJvbC1lbmFibGU6IHllcwoKem9uZToKICBuYW1lOiAiTlNEX1pPTkUiCiAgem9uZWZpbGU6ICJOU0RfWk9ORS56b25lIgoKem9uZToKICBuYW1lOiAiTlNEX1JFVl9aT05FIgogIHpvbmVmaWxlOiAiTlNEX1JFVl9aT05FLnpvbmUiCg==
      NSD_ZONE: domain.tld
      NSD_ZONE_CFG: JE9SSUdJTiBkb21haW4udGxkLgokVFRMIDcyMDAKCjsgU09BCgpAICAgICAgIElOICAgICAgU09BICAgIG5zMS5kb21haW4udGxkLiBob3N0bWFzdGVyLmRvbWFpbi50bGQuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIwMTYwMjAyMDIgOyBTZXJpYWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDcyMDAgICAgICAgOyBSZWZyZXNoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxODAwICAgICAgIDsgUmV0cnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEyMDk2MDAgICAgOyBFeHBpcmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDg2NDAwICkgICAgOyBNaW5pbXVtCgo7IE5BTUVTRVJWRVJTCgpAICAgICAgICAgICAgICAgICAgIElOICAgICAgICAgICAgICAgIE5TICAgICAgICAgICAgICAgICAgIG5zMS5kb21haW4udGxkLgpAICAgICAgICAgICAgICAgICAgIElOICAgICAgICAgICAgICAgIE5TICAgICAgICAgICAgICAgICAgIG5zMi5kb21haW4udGxkLgpAICAgICAgICAgICAgICAgICAgIElOICAgICAgICAgICAgICAgIE5TICAgICAgICAgICAgICAgICAgIG5zMy5kb21haW4udGxkLgoKOyBBIFJFQ09SRFMKCm5zMSAgICAgICAgICAgICAgICAgSU4gICAgICAgICAgICAgICAgQSAgICAgICAgICAgICAgICAgICAgMTkyLjE2OC4yLjEKbnMyICAgICAgICAgICAgICAgICBJTiAgICAgICAgICAgICAgICBBICAgICAgICAgICAgICAgICAgICAxOTIuMTY4LjIuMgpuczMgICAgICAgICAgICAgICAgIElOICAgICAgICAgICAgICAgIEEgICAgICAgICAgICAgICAgICAgIDE5Mi4xNjguMi4zCm5hcyAgICAgICAgICAgICAgICAgSU4gICAgICAgICAgICAgICAgQSAgICAgICAgICAgICAgICAgICAgMTkyLjE2OC4yLjQKcm91dGVyICAgICAgICAgICAgICBJTiAgICAgICAgICAgICAgICBBICAgICAgICAgICAgICAgICAgICAxOTIuMTY4LjIuMjU0Cgo7IENOQU1FIFJFQ09SRFMKCmdhdGV3YXkgICAgICAgICAgICAgICAgIElOICAgICAgICAgICAgICAgIENOQU1FICAgICAgICAgICAgICAgIHJvdXRlcgo=
      NSD_REV_ZONE: 2.168.192.in-addr.arpa
      NSD_REV_ZONE_CFG: O3pvbmUgZmlsZSBmb3IgMTkyLjE2OC4yLjAvMjQgLS0gZG9tYWluLnRsZCByZXZlcnNlIGxvb2t1cAokVFRMIDEwczsgMTAgc2VjcyBkZWZhdWx0IFRUTCBmb3Igem9uZQoyLjE2OC4xOTIuaW4tYWRkci5hcnBhLiBJTiAgICAgIFNPQSAgICAgbnMxLmRvbWFpbi50bGQuIGhvc3RtYXN0ZXIuZG9tYWluLnRsZC4gKAogICAgICAgICAgICAgICAgICAgICAgICAyMDE2MDMwMTAxICAgIDsgc2VyaWFsIG51bWJlciBvZiBab25lIFJlY29yZAogICAgICAgICAgICAgICAgICAgICAgICAxMjAwcyAgICAgICAgIDsgcmVmcmVzaCB0aW1lCiAgICAgICAgICAgICAgICAgICAgICAgIDE4MHMgICAgICAgICAgOyByZXRyeSB0aW1lIG9uIGZhaWx1cmUKICAgICAgICAgICAgICAgICAgICAgICAgMWQgICAgICAgICAgICA7IGV4cGlyYXRpb24gdGltZQogICAgICAgICAgICAgICAgICAgICAgICAzNjAwICAgICAgICAgIDsgY2FjaGUgdGltZSB0byBsaXZlCiAgICAgICAgICAgICAgICAgICAgICAgICkKCjtOYW1lIHNlcnZlcnMgZm9yIHRoaXMgZG9tYWluCjIuMTY4LjE5Mi5pbi1hZGRyLmFycGEuICAgICAgICAgSU4gICAgICBOUyAgICAgICBkb21haW4udGxkLgoKO0lQIHRvIEhvc3RuYW1lIFBvaW50ZXJzCjEuMi4xNjguMTkyLmluLWFkZHIuYXJwYS4gICAgICAgSU4gICAgICBQVFIgICAgICBuczEuZG9tYWluLnRsZC4KMi4yLjE2OC4xOTIuaW4tYWRkci5hcnBhLiAgICAgICBJTiAgICAgIFBUUiAgICAgIG5zMi5kb21haW4udGxkLgozLjIuMTY4LjE5Mi5pbi1hZGRyLmFycGEuICAgICAgIElOICAgICAgUFRSICAgICAgbnMzLmRvbWFpbi50bGQuCjQuMi4xNjguMTkyLmluLWFkZHIuYXJwYS4gICAgICAgSU4gICAgICBQVFIgICAgICBuYXMuZG9tYWluLnRsZC4KMjU0LjIuMTY4LjE5Mi5pbi1hZGRyLmFycGEuICAgICBJTiAgICAgIFBUUiAgICAgIHJvdHVlci5kb21haW4udGxkLgo=
    volumes:
    - nsd_config:/etc/nsd
    - nsd_zones:/zones
    - nsd_db:/var/db/nsd
    ports:
    - 192.168.2.141:53:53
    - 192.168.2.141:53:53/udp
